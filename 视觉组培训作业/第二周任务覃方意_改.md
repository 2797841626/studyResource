* ①像素坐标系(u,v)转②图像坐标系(x',y')
  
  $$
  \left\{
  	\begin{array}{c}
  		x' = k_1(u-u_0)\\
  		y' = k_2(v-v_0)
  	\end{array}
  \right.
  $$
  注 : $k_1,k_2$为像元尺寸，$u_0,v_0$为图像坐标系原点在像素坐标系的坐标.

* ③相机坐标系$(x_c,y_c,z_c)$转②图像坐标系(x',y')
  $$
  \left\{
  	\begin{array}{c}
  		\frac{x'}{f}=\frac{x_c}{z_c}\\
  		\frac{y'}{f}=\frac{y_c}{z_c}
  	\end{array}
  \right.
  $$
  注 : f 为焦距
  
* ③相机坐标系$(x_c,y_c,z_c)$转①像素坐标系(u,v)
  $$
  \left\{
  	\begin{array}{c}
  		\frac{k_1(u-u_0)}{f}=\frac{x_c}{z_c}\\
  		\frac{k_2(v-v_0)}{f}=\frac{y_c}{z_c}
  	\end{array}
  \right.
  $$
  $$
  \left\{
  	\begin{array}{c}
  		u=\frac{f}{k_1}·\frac{x_c}{z_c}+u_0\\
  		v=\frac{f}{k_2}·\frac{y_c}{z_c}+v_0
  	\end{array}
  \right.
  $$

$$
\left[
\matrix{
  u\\
  v
}
\right]
=
\left[
\matrix{
  \frac{f}{k_1}&0\\
  0&\frac{f}{k_2}
}
\right]
\left[
\matrix{
  \frac{x_c}{z_c} \\
  \frac{y_c}{z_c}
}
\right]
+
\left[
\matrix{
  u_0 \\
  v_0 
}
\right]
$$
$$
\left[
\matrix{
  u\\
  v\\
  1
}
\right]
=
\left[
\matrix{
  \frac{f}{k_1}&0&u_0\\
  0&\frac{f}{k_2}&v_0\\
  0&0&1
}
\right]
\left[
\matrix{
  \frac{x_c}{z_c} \\
  \frac{y_c}{z_c}\\
  1
}
\right]
$$
$$
\left[
\matrix{
  u\\
  v\\
  1
}
\right]
=
\left[
\matrix{
  \frac{f}{k_1}·\frac{x_c}{z_c}+u_0\\
  \frac{f}{k_2}· \frac{y_c}{z_c}+v_0\\
  1
}
\right]
$$

* ④世界坐标系$(x_w,y_x,z_w)$转③相机坐标系$(x_c,y_c,z_c)$

$$
\left[
\matrix{
  x_c\\
  y_c\\
  z_c
}
\right]
=
R·
\left[
\matrix{
  x_w\\
  y_w\\
  z_w
}
\right]
+
T
$$

pitch:绕着x轴旋转$\alpha$
$$
\left\{
  	\begin{array}{c}
  		z_c = z_w\cos\alpha-y_w\sin\alpha\\
  		y_c = z_w\sin\alpha+y_w\cos\alpha
  	\end{array}
  \right.
$$

$$
\left[
\matrix{
  x_c\\
  y_c\\
  z_c
}
\right]
=
\left[
\matrix{
  1&0&0\\
  0&\cos\alpha&\sin\alpha\\
  0&-\sin\alpha&\cos\alpha
}
\right]
\left[
\matrix{
  x_w \\
  y_w\\
  z_w
}
\right]
$$

$$
R(pitch)
=
\left[
\matrix{
  1&0&0\\
  0&\cos\alpha&\sin\alpha\\
  0&-\sin\alpha&\cos\alpha
}
\right]
$$

yaw:绕着y轴旋转$\beta$
$$
\left\{
  	\begin{array}{c}
  		x_c = x_w\cos\beta-z_w\sin\beta\\
  		z_c = x_w\sin\beta+z_w\cos\beta
  	\end{array}
  \right.
$$

$$
\left[
\matrix{
  x_c\\
  y_c\\
  z_c
}
\right]
=
\left[
\matrix{
  \cos\beta&0&-\sin\beta\\
   0&1&0\\
  \sin\beta&0&\cos\beta
}
\right]
\left[
\matrix{
  x_w \\
  y_w\\
  z_w
}
\right]
$$

$$
R(yaw)
=
\left[
\matrix{
  \cos\beta&0&-\sin\beta\\
   0&1&0\\
  \sin\beta&0&\cos\beta
}
\right]
$$

roll:绕着z轴旋转$\theta$
$$
\left\{
  	\begin{array}{c}
  		y_c = y_w\cos\theta-x_w\sin\theta\\
  		x_c = y_w\sin\theta+x_w\cos\theta
  	\end{array}
  \right.
$$

$$
\left[
\matrix{
  x_c\\
  y_c\\
  z_c
}
\right]
=
\left[
\matrix{
  \cos\theta&\sin\theta&0\\
  -\sin\theta&\cos\theta&0\\
  0&0&1
}
\right]
\left[
\matrix{
  x_w \\
  y_w\\
  z_w
}
\right]
$$


$$
R(roll)
=
\left[
\matrix{
  \cos\theta&\sin\theta&0\\
  -\sin\theta&\cos\theta&0\\
  0&0&1
}
\right]
$$
旋转矩阵:
$$
R=R(pitch)·R(yaw)·R(roll)

\\R=

\left[
\matrix{
  1&0&0\\
  0&\cos\alpha&\sin\alpha\\
  0&-\sin\alpha&\cos\alpha
}
\right]

·

\left[
\matrix{
  \cos\beta&0&-\sin\beta\\
   0&1&0\\
  \sin\beta&0&\cos\beta
}
\right]

·

\left[
\matrix{
  \cos\theta&\sin\theta&0\\
  -\sin\theta&\cos\theta&0\\
  0&0&1
}
\right]
\\
R=
\left[
\matrix{
  \cos\beta\cos\theta&\cos\beta\sin\theta&-\sin\beta\\
  \sin\alpha\sin\beta\cos\theta-\cos\alpha\sin\theta&\sin\alpha\sin\beta\sin\theta+\cos\alpha\cos\theta&\sin\alpha\cos\beta\\
 \cos\alpha\sin\beta\cos\theta+\cos\alpha\sin\theta&\cos\alpha\sin\beta\sin\theta-\sin\alpha\cos\theta&\cos\alpha\cos\beta
}
\right]
$$
平移矩阵
$$
T=
\left[
\matrix{
x_0\\
y_0\\
z_0
}
\right]
$$

* 当 $R=R(pitch)$ 时，④世界坐标系$(x_w,y_x,z_w)$转①像素坐标系(u,v)

$$
\left[
\matrix{
  x_c\\
  y_c\\
  z_c
}
\right]
=
\left[
\matrix{
  1&0&0\\
  0&\cos\alpha&\sin\alpha\\
  0&-\sin\alpha&\cos\alpha
}
\right]
\left[
\matrix{
  x_w\\
  y_w\\
  z_w
}
\right]
+
\left[
\matrix{
  x_0\\
  y_0\\
  z_0
}
\right]
$$


$$
\left[
\matrix{
  x_c\\
  y_c\\
  z_c
}
\right]
=

\left[
\matrix{
  x_w+x_0\\
  y_w\cos\alpha+z_w\sin\alpha+y_0\\
  -y_w\sin\alpha+z_w\cos\alpha+z_0
}
\right]
$$

$$
\left\{
	\begin{array}{c}
		u=\frac{f}{k_1}·\frac{x_c}{z_c}+u_0\\
		v=\frac{f}{k_2}· \frac{y_c}{z_c}+v_0
	\end{array}
\right.
$$


$$
\left\{
	\begin{array}{c}
		u=\frac{f}{k_1} ·  \frac{x_w+x_0}{-\sin\alpha · y_w + \cos\alpha · z_w + z_0} + u_0 \\
		v=\frac{f}{k_2} ·  \frac{\cos\alpha · y_w + \sin\alpha · z_w + y_0}{-\sin\alpha · y_w + \cos\alpha · z_w + z_0} + v_0
	\end{array}
\right.
$$

